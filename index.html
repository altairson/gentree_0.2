<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://kit.fontawesome.com/2f670d51e7.js" crossorigin="anonymous"></script>
    <script src="https://apis.google.com/js/api.js"></script>
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
<link rel="stylesheet" href="./css/style.css">
<link rel="stylesheet" href="./css/loading.css">
    <title>Document</title>
</head>
<body>
    <div id="delete" class="hidden">
        <p>Are you sure you want to delete selected element?</p>
        <div>
            <button id="deleteYes">Yes</button>
            <button id="deleteNo">No</button>
        </div>
    </div>
    <div class="loading">
        <div class="container">
            <div class="quarter q-1"></div>
            <div class="quarter q-2"></div>
            <div class="quarter q-3"></div>
            <div class="quarter q-4"></div>
            <div class="cover">
                <div class="content">
                    <div class="s-quarter sq-1"></div>
                    <div class="s-quarter sq-2"></div>
                    <div class="s-quarter sq-3"></div>
                    <div class="s-quarter sq-4"></div>
                    <div class="s-cover"></div>
                </div>
            </div>
        </div>
        <div class="text">
            <h3>loading...</h3>
            <div class="text-cover">
                <div class="text-cover-filler">|</div>
            </div>
        </div>
    </div>
    <main id="main">
        <div class="left"></div>
        <div class="right"></div>
        <div class="top"></div>
        <div class="bottom"></div>
        <div id="base"></div>
        <div id="sideList" class="closed">
            <div class="handle opened">
                
            </div>
        </div>
        <div id="editor">
                <svg id="lines" width="auto" height="auto" version="1.1" xmlns="http://www.w3.org/2000/svg"></svg>
                <div class="hidden" id="selectType">
                    <div class="type female">female</div>
                    <div class="type wife">wife</div>
                </div>
        </div>
    </main>



    <div id="void">
        <!-- Dummy frame to avoid new page loading on form submit -->
        <iframe name="dummyframe" id="dummyframe" style="display: none;"></iframe>


        <form id="rooms_form" target="dummyframe" method="POST">
            <div class="form__group field">
                <input type="input" class="form__field" placeholder="email" name="sEmail" id='sEmail' />
                <label for="sEmail" class="form__label">email</label>
            </div>
            <div class="tg-btn">
                <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="weeotc_bot" data-size="medium" data-userpic="false" data-onauth="onTelegramAuth(user)"></script>
            </div>
            <div class="form__group field">
                <input type="input" class="form__field" placeholder="" name="tg_id" id='tg_id' required />
                <label for="tg_id" class="form__label">Telegram ID</label>
            </div>
            <div class="form__group field">
                <input type="input" class="form__field" placeholder="" name="tg_username" id='tg_username' required />
                <label for="tg_username" class="form__label">Telegram Username</label>
            </div>
            <div class="form__group field">
                <input type="input" class="form__field" placeholder="" name="tg_name" id='tg_name' required />
                <label for="tg_name" class="form__label">Telegram Name</label>
            </div>
            <div class="form__group field">
                <input type="password" class="form__field" placeholder="password" name="spassword" id='spassword' required />
                <label for="spassword" class="form__label">password</label>
            </div>
            <div class="button">
                <button type="submit" id="signup">Create</button>
            </div>
        </form>

    
        <form id="login_form"  class="hidden" target="dummyframe" method="GET">
            <div class="form__group field">
                <input type="text" class="form__field" placeholder="email" name="email" id='email' required />
                <label for="email" class="form__label">Email</label>
            </div>
            <br>
            <div class="form__group field">
                <input type="password" class="form__field" placeholder="password" name="password" id='password' required />
                <label for="password" class="form__label">password</label>
            </div>
            <div class="button">
                <button type="submit" id="login">Log in</button>
            </div>
        </form>
    </div>



    <div id="options">
        <i class="fa-solid fa-trash"></i>
        <i class="fa-solid fa-up-down-left-right"></i>
        <i class="fa-solid fa-list"></i>
    </div>
    <script src="./js/script.js"></script>
    <script>
        // user auth with telegram
        function onTelegramAuth(user) {
            if (user) {
                displayUserInfo(user);
            }
            alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');
        }

        function displayUserInfo(user) {
            $("#tg_name").val(user.first_name + ' ' + user.last_name);
            $("#tg_id").val(user.id);
            $("#tg_username").val((user.username ? '@' + user.username : ''));
        }
    </script>
</body>
</html>